<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo and Brand -->
    <div class="navbar-brand">
      <a routerLink="/products" class="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        <span>E-Shop</span>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" (click)="toggleMenu()">
      <svg *ngIf="!isMenuOpen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>
      <svg *ngIf="isMenuOpen" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
      </svg>
    </button>

    <!-- Navigation Links -->
    <div class="navbar-menu" [class.active]="isMenuOpen">
      <a routerLink="/products" routerLinkActive="active" class="nav-link" (click)="closeDropdowns()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/>
        </svg>
        Products
      </a>

      <a routerLink="/cart" routerLinkActive="active" class="nav-link cart-link" (click)="closeDropdowns()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        Cart
        <span class="cart-badge" *ngIf="cartItemsCount > 0">{{ cartItemsCount }}</span>
      </a>
    </div>

    <!-- User Profile Section -->
    <div class="navbar-profile" *ngIf="currentUser">
      <button class="profile-btn" (click)="toggleProfileDropdown()">
        <div class="avatar">{{ userInitials }}</div>
        <span class="username">{{ currentUser.username }}</span>
        <svg class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>

      <!-- Dropdown Menu -->
      <div class="profile-dropdown" [class.active]="isProfileDropdownOpen">
        <div class="dropdown-header">
          <div class="avatar-large">{{ userInitials }}</div>
          <div class="user-info">
            <div class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</div>
            <div class="user-email">{{ currentUser.email }}</div>
          </div>
        </div>
        
        <div class="dropdown-divider"></div>
        
        <a routerLink="/profile" routerLinkActive="active" class="dropdown-item" (click)="closeDropdowns()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          My Profile
        </a>
        
        <a routerLink="/orders" class="dropdown-item" (click)="closeDropdowns()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
          </svg>
          My Orders
        </a>
        
        <div class="dropdown-divider"></div>
        
        <button class="dropdown-item logout-btn" (click)="logout()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
          </svg>
          Logout
        </button>
      </div>
    </div>
  </div>

  <!-- Overlay for mobile menu only -->
  <div class="overlay" [class.active]="isMenuOpen" (click)="closeDropdowns()"></div>
</nav>
