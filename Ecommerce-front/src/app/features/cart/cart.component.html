<div class="container">
  <div class="cart-header">
    <h1>Shopping Cart</h1>
    <button *ngIf="cart.items.length > 0" (click)="clearCart()" class="btn-clear">
      Clear Cart
    </button>
  </div>

  <div *ngIf="cart.items.length === 0" class="empty-cart">
    <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <circle cx="9" cy="21" r="1"/>
      <circle cx="20" cy="21" r="1"/>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
    </svg>
    <h2>Your cart is empty</h2>
    <p>Add some products to get started!</p>
    <button (click)="continueShopping()" class="btn-primary">
      Continue Shopping
    </button>
  </div>

  <div *ngIf="cart.items.length > 0" class="cart-content">
    <div class="cart-items">
      <div *ngFor="let item of cart.items" class="cart-item">
        <div class="item-image">
          <img [src]="getDefaultImage(item)" [alt]="item.product.name">
        </div>

        <div class="item-details">
          <h3>{{ item.product.name }}</h3>
          <p class="item-category">{{ item.product.category }}</p>
          <p class="item-price">${{ item.product.price.toFixed(2) }}</p>
          <p class="item-stock">
            {{ item.product.stockQuantity }} available
          </p>
        </div>

        <div class="item-actions">
          <div class="quantity-controls">
            <button 
              (click)="decreaseQuantity(item)" 
              [disabled]="item.quantity <= 1"
              class="btn-quantity">
              -
            </button>
            <span class="quantity">{{ item.quantity }}</span>
            <button 
              (click)="increaseQuantity(item)" 
              [disabled]="item.quantity >= item.product.stockQuantity"
              class="btn-quantity">
              +
            </button>
          </div>

          <div class="item-total">
            <span class="total-label">Total:</span>
            <span class="total-price">${{ getItemTotal(item).toFixed(2) }}</span>
          </div>

          <button (click)="removeItem(item.product.id)" class="btn-remove">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
              <line x1="10" y1="11" x2="10" y2="17"/>
              <line x1="14" y1="11" x2="14" y2="17"/>
            </svg>
            Remove
          </button>
        </div>
      </div>
    </div>

    <div class="cart-summary">
      <div class="summary-card">
        <h2>Order Summary</h2>

        <div class="summary-row">
          <span>Items ({{ cart.totalItems }})</span>
          <span>${{ cart.totalPrice.toFixed(2) }}</span>
        </div>

        <div class="summary-row">
          <span>Shipping</span>
          <span class="free">Free</span>
        </div>

        <div class="summary-row">
          <span>Tax</span>
          <span>Calculated at checkout</span>
        </div>

        <div class="summary-divider"></div>

        <div class="summary-total">
          <span>Total</span>
          <span>${{ cart.totalPrice.toFixed(2) }}</span>
        </div>

        <button (click)="proceedToCheckout()" class="btn-checkout">
          Proceed to Checkout
        </button>

        <button (click)="continueShopping()" class="btn-continue">
          Continue Shopping
        </button>

        <div class="secure-checkout">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <span>Secure Checkout</span>
        </div>
      </div>
    </div>
  </div>
</div>
