<div class="create-user-container">
  <!-- Header -->
  <div class="page-header">
    <button class="btn-back" (click)="cancel()">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div>
      <h1>Create New User</h1>
      <p class="subtitle">Add a new user account to the platform</p>
    </div>
  </div>

  <!-- Success Message -->
  <div *ngIf="success" class="success-message">
    <i class="fas fa-check-circle"></i>
    <div>
      <strong>Success!</strong> User account created successfully. Redirecting...
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    <i class="fas fa-exclamation-circle"></i>
    {{ error }}
  </div>

  <!-- Form -->
  <div class="form-container">
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      
      <!-- Role Selection -->
      <div class="form-section">
        <h3>Account Type</h3>
        <div class="role-selection">
          <label class="role-option">
            <input type="radio" formControlName="role" value="seller" />
            <div class="role-card">
              <i class="fas fa-store"></i>
              <h4>Seller</h4>
              <p>Can manage and sell products</p>
            </div>
          </label>
          <label class="role-option">
            <input type="radio" formControlName="role" value="customer" />
            <div class="role-card">
              <i class="fas fa-shopping-cart"></i>
              <h4>Customer</h4>
              <p>Can browse and purchase products</p>
            </div>
          </label>
          <label class="role-option">
            <input type="radio" formControlName="role" value="admin" />
            <div class="role-card">
              <i class="fas fa-user-shield"></i>
              <h4>Administrator</h4>
              <p>Full system access and control</p>
            </div>
          </label>
        </div>
      </div>

      <!-- Personal Information -->
      <div class="form-section">
        <h3>Personal Information</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="firstName">First Name <span class="required">*</span></label>
            <input
              type="text"
              id="firstName"
              formControlName="firstName"
              [class.invalid]="isFieldInvalid('firstName')"
              placeholder="Enter first name"
            />
            <span *ngIf="isFieldInvalid('firstName')" class="error-text">
              {{ getFieldError('firstName') }}
            </span>
          </div>

          <div class="form-group">
            <label for="lastName">Last Name <span class="required">*</span></label>
            <input
              type="text"
              id="lastName"
              formControlName="lastName"
              [class.invalid]="isFieldInvalid('lastName')"
              placeholder="Enter last name"
            />
            <span *ngIf="isFieldInvalid('lastName')" class="error-text">
              {{ getFieldError('lastName') }}
            </span>
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input
              type="tel"
              id="phone"
              formControlName="phone"
              placeholder="+1 (555) 000-0000"
            />
          </div>

          <div class="form-group full-width">
            <label for="address">Address</label>
            <input
              type="text"
              id="address"
              formControlName="address"
              placeholder="Enter full address"
            />
          </div>
        </div>
      </div>

      <!-- Account Credentials -->
      <div class="form-section">
        <h3>Account Credentials</h3>
        <div class="form-grid">
          <div class="form-group">
            <label for="username">Username <span class="required">*</span></label>
            <input
              type="text"
              id="username"
              formControlName="username"
              [class.invalid]="isFieldInvalid('username')"
              placeholder="Enter username"
            />
            <span *ngIf="isFieldInvalid('username')" class="error-text">
              {{ getFieldError('username') }}
            </span>
          </div>

          <div class="form-group">
            <label for="email">Email <span class="required">*</span></label>
            <input
              type="email"
              id="email"
              formControlName="email"
              [class.invalid]="isFieldInvalid('email')"
              placeholder="Enter email address"
            />
            <span *ngIf="isFieldInvalid('email')" class="error-text">
              {{ getFieldError('email') }}
            </span>
          </div>

          <div class="form-group full-width">
            <label for="password">Password <span class="required">*</span></label>
            <div class="password-input">
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                formControlName="password"
                [class.invalid]="isFieldInvalid('password')"
                placeholder="Enter password (min 6 characters)"
              />
              <button 
                type="button" 
                class="toggle-password"
                (click)="togglePasswordVisibility()"
              >
                <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
              </button>
            </div>
            <span *ngIf="isFieldInvalid('password')" class="error-text">
              {{ getFieldError('password') }}
            </span>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="loading">
          <i class="fas fa-times"></i>
          Cancel
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="loading || userForm.invalid">
          <i *ngIf="!loading" class="fas fa-user-plus"></i>
          <i *ngIf="loading" class="fas fa-spinner fa-spin"></i>
          {{ loading ? 'Creating...' : 'Create User' }}
        </button>
      </div>
    </form>
  </div>
</div>
